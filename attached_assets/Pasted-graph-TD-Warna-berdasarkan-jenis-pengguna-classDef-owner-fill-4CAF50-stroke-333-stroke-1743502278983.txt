graph TD;
    %% Warna berdasarkan jenis pengguna
    classDef owner fill:#4CAF50,stroke:#333,stroke-width:2px;
    classDef karyawan fill:#2196F3,stroke:#333,stroke-width:2px;
    classDef pelanggan fill:#FFC107,stroke:#333,stroke-width:2px;
    classDef decision fill:#FF5722,stroke:#333,stroke-width:2px;
    classDef popup fill:#9C27B0,stroke:#333,stroke-width:2px;

    A[ðŸ”‘ Mulai] --> B[ðŸ”‘ Pemilik Login]:::owner
    B --> C[ðŸ“ Pilih Menu Input Stok Kode Voucher]:::owner
    C --> D[ðŸ“ Masukkan Data Kode Voucher]
    D --> |Kode Voucher, Nominal, Jenis, Jumlah Stok, Tanggal Expired, Supplier| E[âœ… Konfirmasi dan Simpan Data]:::owner
    E --> F[âœ… Selesai]
    
    B --> G[ðŸ“ Pilih Menu Distribusi Stok ke Karyawan]:::owner
    G --> H[ðŸ“ Pilih Akun Karyawan Penerima]:::owner
    H --> I[ðŸ“ Masukkan Jumlah Stok Voucher]:::owner
    I --> |Jumlah Stok, Total Harga (Rp), Metode Pembayaran, Status Pembayaran, Tanggal Transaksi| J[ðŸ’° Sistem Menampilkan Total Harga]:::owner
    J --> K{âœ… Transaksi Berhasil?}:::decision
    K -- âŒ Tidak --> P1[âš ï¸ Pop-up: Transaksi Gagal, Coba Lagi]:::popup
    P1 --> G
    K -- âœ… Ya --> L[ðŸ’° Kurangi Stok dari Pemilik]:::owner
    L --> M[ðŸ’° Tambahkan Stok ke Karyawan]:::karyawan
    M --> N[âœ… Sub-Proses: Konfirmasi Pembayaran]:::owner
    N --> O[ðŸ“ Karyawan Input Stok Online & Offline]:::karyawan
    O --> F

    %% Tambahan fitur
    B --> RE[âš™ï¸ Manajemen Peran & Akses]:::owner
    RE --> RF[ðŸ“ Tambah/Edit Role Admin, Supervisor, Reseller]:::owner
    RF --> RG[âœ… Simpan Pengaturan Role & Hak Akses]:::owner
    RG --> F

    P --> T1{ðŸ“¶ Koneksi Internet?}:::decision
    T1 -- âŒ Tidak --> T2[ðŸ”„ Mode Offline Aktif]:::karyawan
    T2 --> T3[ðŸ“ Simpan Transaksi Sementara]:::karyawan
    T3 --> T4{ðŸ“¶ Kembali Online?}:::decision
    T4 -- âœ… Ya --> T5[ðŸ”„ Sinkronisasi ke Server]:::karyawan
    T5 --> F

    B --> PAY[ðŸ’° API Pembayaran Otomatis]:::owner
    PAY --> PAY1[ðŸ”„ Cek Status Pembayaran]:::owner
    PAY1 --> PAY2{âœ… Pembayaran Berhasil?}:::decision
    PAY2 -- âœ… Ya --> PAY3[ðŸ’° Tambahkan Stok Otomatis]:::owner
    PAY3 --> F

    B --> RW[ðŸŽ Reward & Cashback]:::owner
    RW --> RW1[ðŸ“ Hitung Poin Reward]:::owner
    RW1 --> RW2{âœ… Cukup Poin untuk Redeem?}:::decision
    RW2 -- âœ… Ya --> RW3[ðŸŽŸï¸ Tukarkan Poin ke Voucher/Diskon]:::owner
    RW3 --> F
    
    B --> RH[ðŸ“¢ Reminder Tagihan & Hutang]:::owner
    RH --> RH1[ðŸ“¨ Kirim Notifikasi Otomatis]:::owner
    RH1 --> RH2{âŒ Hutang Belum Dibayar?}:::decision
    RH2 -- âœ… Ya --> RH3[ðŸ’° Tambahkan Denda Otomatis]:::owner
    RH3 --> F
    
    B --> AI[ðŸ¤– AI Chatbot Layanan Pelanggan]:::owner
    AI --> AI1[ðŸ“¨ Jawab Pertanyaan Otomatis]:::owner
    AI1 --> AI2{âœ… Informasi Diberikan?}:::decision
    AI2 -- âŒ Tidak --> AI3[ðŸ”” Notifikasi ke Admin]:::owner
    AI3 --> F
    
    B --> SEC[ðŸ”’ Sistem Keamanan & Audit Log]:::owner
    SEC --> SEC1[ðŸ“œ Catat Log Aktivitas Pengguna]:::owner
    SEC1 --> SEC2[ðŸ”” Notifikasi Login dari Perangkat Baru]:::owner
    SEC2 --> F
    
    B --> EXP[ðŸ“Š Export Data & Laporan Keuangan]:::owner
    EXP --> EXP1[ðŸ“„ Unduh Laporan Excel/PDF]:::owner
    EXP1 --> EXP2[ðŸ“ˆ Tampilkan Grafik Penjualan & Stok]:::owner
    EXP2 --> F

    %% Tambahan Fitur Optimalisasi
    B --> MPS[ðŸ“‰ Auto Reorder Stok]:::owner
    MPS --> MPS1[ðŸ”” Notifikasi Stok Hampir Habis]:::owner
    MPS1 --> MPS2[ðŸ“ Opsi Pemesanan Ulang]:::owner
    MPS2 --> F

    B --> PPAY[ðŸ’³ Multiple Payment Gateway]:::owner
    PPAY --> PPAY1[ðŸ’° QRIS, e-Wallet, Bank Transfer]:::owner
    PPAY1 --> PPAY2[ðŸ’³ Split Payment (Cash & e-Wallet)]:::owner
    PPAY2 --> F

    B --> PWA[ðŸ“± Progressive Web App]:::owner
    PWA --> PWA1[ðŸ“² Akses Website seperti Aplikasi Mobile]:::owner
    PWA1 --> F
    
    B --> DM[ðŸŒ™ Dark Mode & UI Customization]:::owner
    DM --> DM1[ðŸŽ¨ Pilih Tema & Tata Letak UI]:::owner
    DM1 --> F

    B --> NOT[ðŸ”” Notifikasi Push Browser]:::owner
    NOT --> NOT1[ðŸ“¨ Kirim Notifikasi Langsung ke Browser]:::owner
    NOT1 --> F